CC = gcc

# For the compiler to find the include .h

# obj directory
OBJS_DIR = ./obj

# src directory
SRCS_DIR = ./src

# header directory
INCL_DIR = ./include

# all the lists of files will be fully made
# find the src codes in src
SRCS = $(wildcard $(SRCS_DIR)/*.c)

# substitute the .c with .o
OBJS = $(patsubst $(SRCS_DIR)/%.c,$(OBJS_DIR)/%.o,$(SRCS))

# dependencies for the files d generated by -MP and -MMP
DEPS = $(patsubst $(SRCS_DIR)/%.c,$(OBJS_DIR)/%.d,$(SRCS))


INCL_FLAG = $(addprefix -I,$(INCL_DIR))
CFLAGS = $(INCL_FLAG) -MP -MMD

TARGET = bin
# binary file

all : $(TARGET)


$(TARGET) : $(OBJS)
	$(CC) $^ -o $@

#$< only the first prequisite because the .h is not involved
$(OBJS_DIR)/%.o : $(SRCS_DIR)/%.c
	$(CC) $(CFLAGS) -c $< -o $@

.PHONY: clean

clean:
	rm -f $(OBJS_DIR)/*.o $(OBJS_DIR)/*.d $(TARGET)